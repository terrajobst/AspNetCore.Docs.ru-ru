---
uid: web-forms/overview/presenting-and-managing-data/model-binding/retrieving-data
title: Извлечение и отображение данных с помощью модели привязки и веб-форм | Документация Майкрософт
author: tfitzmac
description: В этой серии руководств показано основными аспектами с помощью привязки модели с проектом веб-форм ASP.NET. Привязка модели позволяет взаимодействие с данными более прямой-...
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/27/2014
ms.topic: article
ms.assetid: 9f24fb82-c7ac-48da-b8e2-51b3da17e365
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/presenting-and-managing-data/model-binding/retrieving-data
msc.type: authoredcontent
ms.openlocfilehash: 4a76fcfd2620eb0789b7a6a23990037a1eebaf4c
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/03/2018
ms.locfileid: "37378499"
---
<a name="retrieving-and-displaying-data-with-model-binding-and-web-forms"></a><span data-ttu-id="33fc4-104">Извлечение и отображение данных с помощью привязки модели и веб-форм</span><span class="sxs-lookup"><span data-stu-id="33fc4-104">Retrieving and displaying data with model binding and web forms</span></span>
====================
<span data-ttu-id="33fc4-105">по [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="33fc4-105">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="33fc4-106">В этой серии руководств показано основными аспектами с помощью привязки модели с проектом веб-форм ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="33fc4-106">This tutorial series demonstrates basic aspects of using model binding with an ASP.NET Web Forms project.</span></span> <span data-ttu-id="33fc4-107">Привязка модели упрощает взаимодействие с данными более эффективную чем работа с данными объектов источника (например, элемент управления ObjectDataSource и SqlDataSource).</span><span class="sxs-lookup"><span data-stu-id="33fc4-107">Model binding makes data interaction more straight-forward than dealing with data source objects (such as ObjectDataSource or SqlDataSource).</span></span> <span data-ttu-id="33fc4-108">Эта серия начинается с вводный материал и перемещает до более продвинутых в последующих руководствах.</span><span class="sxs-lookup"><span data-stu-id="33fc4-108">This series starts with introductory material and moves to more advanced concepts in later tutorials.</span></span>
> 
> <span data-ttu-id="33fc4-109">Шаблон привязки модели работает с любой технологии доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="33fc4-109">The model binding pattern works with any data access technology.</span></span> <span data-ttu-id="33fc4-110">В этом руководстве используется платформа Entity Framework, но можно использовать технологии доступа к данным, который наиболее вам знакомы.</span><span class="sxs-lookup"><span data-stu-id="33fc4-110">In this tutorial, you will use Entity Framework, but you could use the data access technology that is most familiar to you.</span></span> <span data-ttu-id="33fc4-111">Из элемента управления с привязкой к данным сервера, например в элементе управления GridView, ListView, DetailsView и FormView укажите имена методов для выбора, обновления, удаления и создания данных.</span><span class="sxs-lookup"><span data-stu-id="33fc4-111">From a data-bound server control, such as a GridView, ListView, DetailsView, or FormView control, you specify the names of the methods to use for selecting, updating, deleting, and creating data.</span></span> <span data-ttu-id="33fc4-112">В этом руководстве вы укажете значение для SelectMethod.</span><span class="sxs-lookup"><span data-stu-id="33fc4-112">In this tutorial, you will specify a value for the SelectMethod.</span></span>
> 
> <span data-ttu-id="33fc4-113">В этом методе обеспечивают логику для получения данных.</span><span class="sxs-lookup"><span data-stu-id="33fc4-113">Within that method, you provide the logic for retrieving the data.</span></span> <span data-ttu-id="33fc4-114">В следующем учебном курсе UpdateMethod и InsertMethod и DeleteMethod установит значения.</span><span class="sxs-lookup"><span data-stu-id="33fc4-114">In the next tutorial, you will set values for UpdateMethod, DeleteMethod and InsertMethod.</span></span>
> 
> <span data-ttu-id="33fc4-115">Вы можете [загрузить](https://go.microsoft.com/fwlink/?LinkId=286116) весь проект полностью на C# или Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="33fc4-115">You can [download](https://go.microsoft.com/fwlink/?LinkId=286116) the complete project in C# or VB.</span></span> <span data-ttu-id="33fc4-116">Загружаемый код работает с Visual Studio 2012 или Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="33fc4-116">The downloadable code works with either Visual Studio 2012 or Visual Studio 2013.</span></span> <span data-ttu-id="33fc4-117">Он использует шаблон Visual Studio 2012, который немного отличается от шаблона Visual Studio 2013, в этом учебнике.</span><span class="sxs-lookup"><span data-stu-id="33fc4-117">It uses the Visual Studio 2012 template, which is slightly different than the Visual Studio 2013 template shown in this tutorial.</span></span>
> 
> <span data-ttu-id="33fc4-118">В этом руководстве вы запустите приложение в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="33fc4-118">In the tutorial you run the application in Visual Studio.</span></span> <span data-ttu-id="33fc4-119">Вы можете также сделать приложение доступным через Интернет, развернув ее у поставщика услуг размещения.</span><span class="sxs-lookup"><span data-stu-id="33fc4-119">You can also make the application available over the Internet by deploying it to a hosting provider.</span></span> <span data-ttu-id="33fc4-120">Корпорация Майкрософт предлагает бесплатные услуг хостинга до 10 веб-сайтов в</span><span class="sxs-lookup"><span data-stu-id="33fc4-120">Microsoft offers free web hosting for up to 10 web sites in a</span></span>  
>  <span data-ttu-id="33fc4-121">[бесплатную пробную учетную запись Azure](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span><span class="sxs-lookup"><span data-stu-id="33fc4-121">[free Azure trial account](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span></span> <span data-ttu-id="33fc4-122">Сведения о развертывании веб-проекта Visual Studio веб-приложениях службы приложений Azure, см. в разделе [веб-развертывание ASP.NET с помощью Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md) рядов.</span><span class="sxs-lookup"><span data-stu-id="33fc4-122">For information about how to deploy a Visual Studio web project to Azure App Service Web Apps, see the [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md) series.</span></span> <span data-ttu-id="33fc4-123">Этот учебник также показано, как использовать Entity Framework Code First Migrations для развертывания базы данных SQL Server в базу данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="33fc4-123">That tutorial also shows how to use Entity Framework Code First Migrations to deploy your SQL Server database to Azure SQL Database.</span></span>
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="33fc4-124">Версии программного обеспечения, используемые в этом руководстве</span><span class="sxs-lookup"><span data-stu-id="33fc4-124">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="33fc4-125">Microsoft Visual Studio 2013 или Microsoft Visual Studio Express 2013 для Web</span><span class="sxs-lookup"><span data-stu-id="33fc4-125">Microsoft Visual Studio 2013 or Microsoft Visual Studio Express 2013 for Web</span></span>
>   
> 
> <span data-ttu-id="33fc4-126">Этот учебник также работает с Visual Studio 2012, но некоторые отличия в пользовательский интерфейс и проекта шаблон.</span><span class="sxs-lookup"><span data-stu-id="33fc4-126">This tutorial also works with Visual Studio 2012 but there will be some differences in the user interface and project template.</span></span>


## <a name="what-youll-build"></a><span data-ttu-id="33fc4-127">Вы создадите</span><span class="sxs-lookup"><span data-stu-id="33fc4-127">What you'll build</span></span>

<span data-ttu-id="33fc4-128">В этом руководстве вам потребуется:</span><span class="sxs-lookup"><span data-stu-id="33fc4-128">In this tutorial, you'll:</span></span>

1. <span data-ttu-id="33fc4-129">Создание объектов данных, которые отражают университет с студентов, зачисленных на курсы</span><span class="sxs-lookup"><span data-stu-id="33fc4-129">Build data objects that reflect a university with students enrolled in courses</span></span>
2. <span data-ttu-id="33fc4-130">Построение таблиц базы данных из объектов</span><span class="sxs-lookup"><span data-stu-id="33fc4-130">Build database tables from the objects</span></span>
3. <span data-ttu-id="33fc4-131">Заполнение базы данных тестовыми данными</span><span class="sxs-lookup"><span data-stu-id="33fc4-131">Populate the database with test data</span></span>
4. <span data-ttu-id="33fc4-132">Отображение данных в веб-формы</span><span class="sxs-lookup"><span data-stu-id="33fc4-132">Display data in a web form</span></span>

## <a name="set-up-project"></a><span data-ttu-id="33fc4-133">Настройка проекта</span><span class="sxs-lookup"><span data-stu-id="33fc4-133">Set up project</span></span>

<span data-ttu-id="33fc4-134">В Visual Studio 2013, создайте новый **веб-приложение ASP.NET** вызывается **ContosoUniversityModelBinding**.</span><span class="sxs-lookup"><span data-stu-id="33fc4-134">In Visual Studio 2013, create a new **ASP.NET Web Application** called **ContosoUniversityModelBinding**.</span></span>

![Создание проекта](retrieving-data/_static/image2.png)

<span data-ttu-id="33fc4-136">Выберите шаблон веб-форм и оставьте значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="33fc4-136">Select the Web Forms template, and leave the other default options.</span></span> <span data-ttu-id="33fc4-137">Нажмите кнопку ОК, чтобы настроить проект.</span><span class="sxs-lookup"><span data-stu-id="33fc4-137">Click OK to setup the project.</span></span>

![Выберите веб-форм](retrieving-data/_static/image3.png)

<span data-ttu-id="33fc4-139">Во-первых вы внесете ряд небольшие изменения в настройки внешнего вида узла.</span><span class="sxs-lookup"><span data-stu-id="33fc4-139">First, you will make a couple of small changes to customize the appearance of the site.</span></span> <span data-ttu-id="33fc4-140">Откройте **Site.Master** файл и измените заголовок на включают университета Contoso вместо Мое приложение ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="33fc4-140">Open the **Site.Master** file, and change the title to include Contoso University instead of My ASP.NET Application.</span></span>

[!code-aspx[Main](retrieving-data/samples/sample1.aspx?highlight=1)]

<span data-ttu-id="33fc4-141">Затем измените текст заголовка из **имя_приложения** для **университета Contoso**.</span><span class="sxs-lookup"><span data-stu-id="33fc4-141">Then, change the header text from **Application name** to **Contoso University**.</span></span>

[!code-aspx[Main](retrieving-data/samples/sample2.aspx?highlight=7)]

<span data-ttu-id="33fc4-142">Также в Site.Master, измените ссылки навигации, отображаются в заголовке, чтобы отразить на страницах, которые относятся к этому сайту.</span><span class="sxs-lookup"><span data-stu-id="33fc4-142">Also in Site.Master, change the navigation links that appear in the header to reflect the pages that are relevant to this site.</span></span> <span data-ttu-id="33fc4-143">Вам не потребуется либо **о** страницы или **контакт** странице, чтобы удалить эти связи.</span><span class="sxs-lookup"><span data-stu-id="33fc4-143">You will not need either the **About** page or the **Contact** page so those links can be removed.</span></span> <span data-ttu-id="33fc4-144">Вместо этого необходимо будет ссылку, чтобы страница с именем **учащихся**.</span><span class="sxs-lookup"><span data-stu-id="33fc4-144">Instead, you will need a link to a page called **Students**.</span></span> <span data-ttu-id="33fc4-145">Эта страница еще не создана.</span><span class="sxs-lookup"><span data-stu-id="33fc4-145">This page has not been created yet.</span></span>

[!code-aspx[Main](retrieving-data/samples/sample3.aspx)]

<span data-ttu-id="33fc4-146">Сохраните и закройте Site.Master.</span><span class="sxs-lookup"><span data-stu-id="33fc4-146">Save and close Site.Master.</span></span>

<span data-ttu-id="33fc4-147">Теперь вы создадите веб-формы для отображения данных об учащихся.</span><span class="sxs-lookup"><span data-stu-id="33fc4-147">Now, you'll create the web form for displaying student data.</span></span> <span data-ttu-id="33fc4-148">Щелкните правой кнопкой мыши проект, и **добавить** **новый элемент**.</span><span class="sxs-lookup"><span data-stu-id="33fc4-148">Right-click your project, and **Add** a **New Item**.</span></span> <span data-ttu-id="33fc4-149">Выберите **веб-форма с главной страницы** шаблона и назовите его **Students.aspx**.</span><span class="sxs-lookup"><span data-stu-id="33fc4-149">Select the **Web Form with Master Page** template, and name it **Students.aspx**.</span></span>

![Создание страницы](retrieving-data/_static/image5.png)

<span data-ttu-id="33fc4-151">Выберите **Site.Master** как на главную страницу для новой веб-формы.</span><span class="sxs-lookup"><span data-stu-id="33fc4-151">Select **Site.Master** as the master page for the new web form.</span></span>

## <a name="create-the-data-models-and-database"></a><span data-ttu-id="33fc4-152">Создание модели данных и базы данных</span><span class="sxs-lookup"><span data-stu-id="33fc4-152">Create the data models and database</span></span>

<span data-ttu-id="33fc4-153">Code First Migrations будет использовать для создания объектов и соответствующие таблицы базы данных.</span><span class="sxs-lookup"><span data-stu-id="33fc4-153">You will use Code First Migrations to create objects and the corresponding database tables.</span></span> <span data-ttu-id="33fc4-154">Эти таблицы будут храниться сведения об учащихся и их курсы.</span><span class="sxs-lookup"><span data-stu-id="33fc4-154">These tables will store information about the students and their courses.</span></span>

<span data-ttu-id="33fc4-155">В папке Models, добавьте новый класс с именем **UniversityModels.cs**.</span><span class="sxs-lookup"><span data-stu-id="33fc4-155">In the Models folder, add a new class named **UniversityModels.cs**.</span></span>

![Создание класса модели](retrieving-data/_static/image7.png)

<span data-ttu-id="33fc4-157">В этом файле определите классы SchoolContext, учащихся, регистрации и курс следующим образом:</span><span class="sxs-lookup"><span data-stu-id="33fc4-157">In this file, define the SchoolContext, Student, Enrollment, and Course classes as follows:</span></span>

[!code-csharp[Main](retrieving-data/samples/sample4.cs)]

<span data-ttu-id="33fc4-158">Класс SchoolContext является производным от DbContext, который управляет подключения к базе данных и изменения в данных.</span><span class="sxs-lookup"><span data-stu-id="33fc4-158">The SchoolContext class derives from DbContext, which manages the database connection and changes in the data.</span></span>

<span data-ttu-id="33fc4-159">В классе учащегося, обратите внимание, что атрибуты, которые были применены к **FirstName**, **LastName**, и **год** свойства.</span><span class="sxs-lookup"><span data-stu-id="33fc4-159">In the Student class, notice the attributes that have been applied to the **FirstName**, **LastName**, and **Year** properties.</span></span> <span data-ttu-id="33fc4-160">Эти атрибуты будут использоваться для проверки данных в этом руководстве.</span><span class="sxs-lookup"><span data-stu-id="33fc4-160">These attributes will be used for data validation in this tutorial.</span></span> <span data-ttu-id="33fc4-161">Чтобы упростить код для этой демонстрации проекта, эти свойства были помечены как с атрибутами проверки данных.</span><span class="sxs-lookup"><span data-stu-id="33fc4-161">To simplify the code for this demonstration project, only these properties were marked with data-validation attributes.</span></span> <span data-ttu-id="33fc4-162">В реальном проекте можно применить атрибуты проверки для всех свойств, которые должны проверенные данные, такие как свойства в классах регистрации и курса.</span><span class="sxs-lookup"><span data-stu-id="33fc4-162">In a real project, you would apply validation attributes to all properties that need validated data, such as properties in the Enrollment and Course classes.</span></span>

<span data-ttu-id="33fc4-163">Сохраните UniversityModels.cs.</span><span class="sxs-lookup"><span data-stu-id="33fc4-163">Save UniversityModels.cs.</span></span>

<span data-ttu-id="33fc4-164">Чтобы настроить базу данных, на основе этих классов будет использовать средства Code First Migrations.</span><span class="sxs-lookup"><span data-stu-id="33fc4-164">You will use the tools for Code First Migrations to set up a database based on these classes.</span></span>

<span data-ttu-id="33fc4-165">В **консоль диспетчера пакетов**, выполните команду:</span><span class="sxs-lookup"><span data-stu-id="33fc4-165">In **Package Manager Console**, run the command:</span></span>  
`enable-migrations -ContextTypeName ContosoUniversityModelBinding.Models.SchoolContext`

<span data-ttu-id="33fc4-166">Если команда завершается успешно, вы получите сообщение о том, что включили миграции</span><span class="sxs-lookup"><span data-stu-id="33fc4-166">If the command completes successfully you will receive a message stating migrations have been enabled,</span></span>

![выполняет миграцию](retrieving-data/_static/image8.png)

<span data-ttu-id="33fc4-168">Обратите внимание, что новый файл с именем **Configuration.cs** будет создана.</span><span class="sxs-lookup"><span data-stu-id="33fc4-168">Notice that a new file named **Configuration.cs** has been created.</span></span> <span data-ttu-id="33fc4-169">В Visual Studio этот файл автоматически открывается после его создания.</span><span class="sxs-lookup"><span data-stu-id="33fc4-169">In Visual Studio, this file is automatically opened after it is created.</span></span> <span data-ttu-id="33fc4-170">Содержит класс конфигурации **начальное значение** метод, который позволяет предварительно заполнить таблицы базы данных тестовыми данными.</span><span class="sxs-lookup"><span data-stu-id="33fc4-170">The Configuration class contains a **Seed** method which enables you to pre-populate the database tables with test data.</span></span>

<span data-ttu-id="33fc4-171">Добавьте следующий код в метод начальное значение.</span><span class="sxs-lookup"><span data-stu-id="33fc4-171">Add the following code to the Seed method.</span></span> <span data-ttu-id="33fc4-172">Вам потребуется добавить **с помощью** инструкции для **ContosoUniversityModelBinding.Models** пространства имен.</span><span class="sxs-lookup"><span data-stu-id="33fc4-172">You'll need to add a **using** statement for the **ContosoUniversityModelBinding.Models** namespace.</span></span>

[!code-csharp[Main](retrieving-data/samples/sample5.cs)]

<span data-ttu-id="33fc4-173">Сохраните Configuration.cs.</span><span class="sxs-lookup"><span data-stu-id="33fc4-173">Save Configuration.cs.</span></span>

<span data-ttu-id="33fc4-174">В консоли диспетчера пакетов выполните команду `add-migration initial`.</span><span class="sxs-lookup"><span data-stu-id="33fc4-174">In the Package Manager Console, run the command `add-migration initial`.</span></span>

<span data-ttu-id="33fc4-175">Выполните команду `update-database`.</span><span class="sxs-lookup"><span data-stu-id="33fc4-175">Then, run the command `update-database`.</span></span>

<span data-ttu-id="33fc4-176">Появление исключения при выполнении этой команды, это возможно, что значения StudentID и CourseID имеют различные из значения в метод заполнения.</span><span class="sxs-lookup"><span data-stu-id="33fc4-176">If you receive an exception when running this command, it is possible that the values for StudentID and CourseID have varied from the values in the Seed method.</span></span> <span data-ttu-id="33fc4-177">Откройте эти таблицы в базе данных и найдите существующие значения для StudentID и CourseID.</span><span class="sxs-lookup"><span data-stu-id="33fc4-177">Open those tables in the database and find existing values for StudentID and CourseID.</span></span> <span data-ttu-id="33fc4-178">Добавьте эти значения в коде для заполнения таблицы регистрации.</span><span class="sxs-lookup"><span data-stu-id="33fc4-178">Add those values in the code for seeding the Enrollments table.</span></span>

<span data-ttu-id="33fc4-179">Файл базы данных был добавлен, но в настоящее время он скрыт в проекте.</span><span class="sxs-lookup"><span data-stu-id="33fc4-179">The database file has been added, but it is currently hidden in the project.</span></span> <span data-ttu-id="33fc4-180">Нажмите кнопку **Показать все файлы** для отображения файла.</span><span class="sxs-lookup"><span data-stu-id="33fc4-180">Click **Show All Files** to display the file.</span></span>

![Показать все файлы](retrieving-data/_static/image10.png)

<span data-ttu-id="33fc4-182">Обратите внимание на то, MDF-файл появится в приложении\_папку данных.</span><span class="sxs-lookup"><span data-stu-id="33fc4-182">Notice the .mdf file now appears in the App\_Data folder.</span></span>

![файл базы данных](retrieving-data/_static/image12.png)

<span data-ttu-id="33fc4-184">Дважды щелкните файл MDF-файл и откройте обозреватель серверов.</span><span class="sxs-lookup"><span data-stu-id="33fc4-184">Double-click the .mdf file and open the Server Explorer.</span></span> <span data-ttu-id="33fc4-185">Теперь существуют и таблицы заполняются данными.</span><span class="sxs-lookup"><span data-stu-id="33fc4-185">The tables now exist and are populated with data.</span></span>

![таблицы баз данных](retrieving-data/_static/image14.png)

## <a name="display-data-from-students-and-related-tables"></a><span data-ttu-id="33fc4-187">Отображение данных из связанных таблиц и учащихся</span><span class="sxs-lookup"><span data-stu-id="33fc4-187">Display data from Students and related tables</span></span>

<span data-ttu-id="33fc4-188">С данными в базе данных теперь вы готовы для получения этих данных и отображения его на веб-странице.</span><span class="sxs-lookup"><span data-stu-id="33fc4-188">With data in the database, you are now ready to retrieve that data and display it in a web page.</span></span> <span data-ttu-id="33fc4-189">Вы воспользуетесь **GridView** управления для отображения данных в столбцах и строках.</span><span class="sxs-lookup"><span data-stu-id="33fc4-189">You will use a **GridView** control to display the data in columns and rows.</span></span>

<span data-ttu-id="33fc4-190">Откройте Students.aspx и найдите **MainContent** заполнителя.</span><span class="sxs-lookup"><span data-stu-id="33fc4-190">Open Students.aspx, and locate the **MainContent** placeholder.</span></span> <span data-ttu-id="33fc4-191">В рамку, добавьте **GridView** элемент управления, который включает следующий код.</span><span class="sxs-lookup"><span data-stu-id="33fc4-191">Within that placeholder, add a **GridView** control that includes the following code.</span></span>

[!code-aspx[Main](retrieving-data/samples/sample6.aspx)]

<span data-ttu-id="33fc4-192">Существует несколько важных понятий в этом коде разметки, вам необходимо обратить внимание.</span><span class="sxs-lookup"><span data-stu-id="33fc4-192">There are a couple of important concepts in this markup code for you to notice.</span></span> <span data-ttu-id="33fc4-193">Во-первых, обратите внимание, что значение установлено для **SelectMethod** свойства в элементе GridView.</span><span class="sxs-lookup"><span data-stu-id="33fc4-193">First, notice that a value is set for the **SelectMethod** property in the GridView element.</span></span> <span data-ttu-id="33fc4-194">Это значение задает имя метода, который используется для получения данных для элемента GridView.</span><span class="sxs-lookup"><span data-stu-id="33fc4-194">This value specifies the name of the method that is used for retrieving data for the GridView.</span></span> <span data-ttu-id="33fc4-195">На следующем шаге вы создадите этот метод.</span><span class="sxs-lookup"><span data-stu-id="33fc4-195">You will create this method in the next step.</span></span> <span data-ttu-id="33fc4-196">Во-вторых, обратите внимание, что **ItemType** свойство имеет значение класса Student, созданную ранее.</span><span class="sxs-lookup"><span data-stu-id="33fc4-196">Second, notice that the **ItemType** property is set to the Student class that you created earlier.</span></span> <span data-ttu-id="33fc4-197">Установив это значение, могут ссылаться на свойства этого класса в коде разметки.</span><span class="sxs-lookup"><span data-stu-id="33fc4-197">By setting this value, you can refer to properties of that class in the markup code.</span></span> <span data-ttu-id="33fc4-198">Например класс Student содержит коллекцию с именем регистрациями.</span><span class="sxs-lookup"><span data-stu-id="33fc4-198">For example, the Student class contains a collection named Enrollments.</span></span> <span data-ttu-id="33fc4-199">Можно использовать **Item.Enrollments** для извлечения этой коллекции и затем использовать синтаксис LINQ для получения суммы зарегистрированного деньги на счете для каждого учащегося.</span><span class="sxs-lookup"><span data-stu-id="33fc4-199">You can use **Item.Enrollments** to retrieve that collection and then use LINQ syntax to retrieve the sum of enrolled credits for each student.</span></span>

<span data-ttu-id="33fc4-200">В файле кода, необходимо добавить метод, который указан для **SelectMethod** значение.</span><span class="sxs-lookup"><span data-stu-id="33fc4-200">In the code-behind file, you need to add the method that is specified for the **SelectMethod** value.</span></span> <span data-ttu-id="33fc4-201">Откройте **Students.aspx.cs**и добавьте **с помощью** инструкций для **ContosoUniversityModelBinding.Models** и **System.Data.Entity**пространства имен.</span><span class="sxs-lookup"><span data-stu-id="33fc4-201">Open **Students.aspx.cs**, and add **using** statements for the **ContosoUniversityModelBinding.Models** and **System.Data.Entity** namespaces.</span></span>

[!code-csharp[Main](retrieving-data/samples/sample7.cs)]

<span data-ttu-id="33fc4-202">Затем добавьте следующий метод.</span><span class="sxs-lookup"><span data-stu-id="33fc4-202">Then, add the following method.</span></span> <span data-ttu-id="33fc4-203">Обратите внимание на то, что имя этого метода соответствует имени, которое вы указали для SelectMethod.</span><span class="sxs-lookup"><span data-stu-id="33fc4-203">Notice that the name of this method matches the name you provided for SelectMethod.</span></span>

[!code-csharp[Main](retrieving-data/samples/sample8.cs)]

<span data-ttu-id="33fc4-204">**Include** предложение улучшает производительность запроса, но не очень важен для запросов для работы.</span><span class="sxs-lookup"><span data-stu-id="33fc4-204">The **Include** clause improves the performance of this query but is not essential for the query to work.</span></span> <span data-ttu-id="33fc4-205">Без предложения Include данные следует получить с помощью отложенной загрузки, которая используется для отправки связанных отдельный запрос к базе данных каждый раз, что данные извлекаются.</span><span class="sxs-lookup"><span data-stu-id="33fc4-205">Without the Include clause, the data would be retrieved using lazy loading, which involves sending a separate query to the database each time related data is retrieved.</span></span> <span data-ttu-id="33fc4-206">Предоставляя предложения Include, данные извлекаются с помощью Безотложная загрузка, значит, все связанные данные извлекается с помощью одного запроса базы данных.</span><span class="sxs-lookup"><span data-stu-id="33fc4-206">By providing the Include clause, the data is retrieved using eager loading, which means all of the related data is retrieved through a single query of the database.</span></span> <span data-ttu-id="33fc4-207">В случаях, когда большая часть связанные данные не используется, упреждающая загрузка может привести к снижению эффективности так, как получить дополнительные данные.</span><span class="sxs-lookup"><span data-stu-id="33fc4-207">In cases where most of the related data is not be used, eager loading can be less efficient because more data is retrieved.</span></span> <span data-ttu-id="33fc4-208">Тем не менее в этом случае Безотложная загрузка обеспечивает наилучшую производительность поскольку взаимосвязанные данные отображаются для каждой записи.</span><span class="sxs-lookup"><span data-stu-id="33fc4-208">However, in this case, eager loading provides the best performance because the related data is displayed for each record.</span></span>

<span data-ttu-id="33fc4-209">Дополнительные сведения о производительности следует учитывать при загрузке связанных данных, см. в разделе **Lazy Eager и явная загрузка связанных данных** в [чтение связанных данных с помощью Entity Framework в ASP Приложение .NET MVC](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/reading-related-data-with-the-entity-framework-in-an-asp-net-mvc-application.md) раздела.</span><span class="sxs-lookup"><span data-stu-id="33fc4-209">For more information about performance consideration when loading related data, see the section titled **Lazy, Eager, and Explicit Loading of Related Data** in the [Reading Related Data with the Entity Framework in an ASP.NET MVC Application](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/reading-related-data-with-the-entity-framework-in-an-asp-net-mvc-application.md) topic.</span></span>

<span data-ttu-id="33fc4-210">По умолчанию данные сортируются по значениям свойства, помеченного как ключ.</span><span class="sxs-lookup"><span data-stu-id="33fc4-210">By default, the data is sorted by the values of the property marked as the key.</span></span> <span data-ttu-id="33fc4-211">Можно добавить предложение OrderBy, чтобы указать другое значение для сортировки.</span><span class="sxs-lookup"><span data-stu-id="33fc4-211">You can add an OrderBy clause to specify a different value for sorting.</span></span> <span data-ttu-id="33fc4-212">В этом примере свойство StudentID по умолчанию используется для сортировки.</span><span class="sxs-lookup"><span data-stu-id="33fc4-212">In this example, the default StudentID property is used for sorting.</span></span> <span data-ttu-id="33fc4-213">В [сортировка, разбиение по страницам и фильтрация данных](sorting-paging-and-filtering-data.md) разделе позволит пользователю выбрать столбец для сортировки.</span><span class="sxs-lookup"><span data-stu-id="33fc4-213">In the [Sorting, Paging, and Filtering Data](sorting-paging-and-filtering-data.md) topic, you will enable the user to select a column for sorting.</span></span>

<span data-ttu-id="33fc4-214">Запустите веб-приложение и перейдите на страницу учащихся.</span><span class="sxs-lookup"><span data-stu-id="33fc4-214">Run your web application, and navigate to the Students page.</span></span> <span data-ttu-id="33fc4-215">На страницу учащихся отображаются следующие сведения учащегося.</span><span class="sxs-lookup"><span data-stu-id="33fc4-215">The Students page displays the following student information.</span></span>

![Отображение данных](retrieving-data/_static/image16.png)

## <a name="automatic-generation-of-model-binding-methods"></a><span data-ttu-id="33fc4-217">Автоматическое создание методы привязки модели</span><span class="sxs-lookup"><span data-stu-id="33fc4-217">Automatic generation of model binding methods</span></span>

<span data-ttu-id="33fc4-218">При работе с этой серии руководств, можно просто скопировать код из учебника в проект.</span><span class="sxs-lookup"><span data-stu-id="33fc4-218">When working through this tutorial series, you can simply copy the code from the tutorial to your project.</span></span> <span data-ttu-id="33fc4-219">Однако Недостаток такого подхода является, вам может не по нескольким признакам функции, предоставляемые Visual Studio для автоматического создания кода для методы привязки модели.</span><span class="sxs-lookup"><span data-stu-id="33fc4-219">However, one disadvantage of this approach is that you may not become aware of the feature provided by Visual Studio to automatically generate code for model binding methods.</span></span> <span data-ttu-id="33fc4-220">При работе на ваших собственных проектов, автоматическое создание кода может сэкономить время и получить представление о том, как реализовать операцию.</span><span class="sxs-lookup"><span data-stu-id="33fc4-220">When working on your own projects, automatic code generation can save you time and help you gain a sense of how to implement an operation.</span></span> <span data-ttu-id="33fc4-221">В этом разделе описывается функция создания кода.</span><span class="sxs-lookup"><span data-stu-id="33fc4-221">This section describes the automatic code generation feature.</span></span> <span data-ttu-id="33fc4-222">В этом разделе носит чисто информационный характер и не содержит любой код, который необходимо реализовать в своем проекте.</span><span class="sxs-lookup"><span data-stu-id="33fc4-222">This section is only informational and does not contain any code you need to implement in your project.</span></span>

<span data-ttu-id="33fc4-223">При установке значения для **SelectMethod**, **UpdateMethod**, **InsertMethod**, или **DeleteMethod** свойства в коде разметки можно выбрать **создайте новый метод** параметр.</span><span class="sxs-lookup"><span data-stu-id="33fc4-223">When setting a value for the **SelectMethod**, **UpdateMethod**, **InsertMethod**, or **DeleteMethod** properties in the markup code, you can select the **Create New Method** option.</span></span>

![Создайте новый метод](retrieving-data/_static/image18.png)

<span data-ttu-id="33fc4-225">Visual Studio не только создает метод в коде программной части с правильной сигнатурой, но также создает код реализации для упрощения выполнения операции.</span><span class="sxs-lookup"><span data-stu-id="33fc4-225">Visual Studio not only creates a method in the code-behind with the proper signature, but also generates implementation code to assist you with performing the operation.</span></span> <span data-ttu-id="33fc4-226">Если сначала установить **ItemType** свойство перед использованием функции создания кода, созданный код будет использовать этот тип для операций.</span><span class="sxs-lookup"><span data-stu-id="33fc4-226">If you first set the **ItemType** property before using the automatic code generation feature, the generated code will use that type for the operations.</span></span> <span data-ttu-id="33fc4-227">Например при задании свойства UpdateMethod, автоматически создается следующий код:</span><span class="sxs-lookup"><span data-stu-id="33fc4-227">For example, when setting the UpdateMethod property, the following code is automatically generated:</span></span>

[!code-csharp[Main](retrieving-data/samples/sample9.cs)]

<span data-ttu-id="33fc4-228">Опять же приведенный выше код не должны быть добавлены в проект.</span><span class="sxs-lookup"><span data-stu-id="33fc4-228">Again, the above code does not need to be added to your project.</span></span> <span data-ttu-id="33fc4-229">В следующем учебном курсе необходимо реализовать методы для обновления, удаления и добавления новых данных.</span><span class="sxs-lookup"><span data-stu-id="33fc4-229">In the next tutorial, you will implement methods for updating, deleting and adding new data.</span></span>

## <a name="conclusion"></a><span data-ttu-id="33fc4-230">Заключение</span><span class="sxs-lookup"><span data-stu-id="33fc4-230">Conclusion</span></span>

<span data-ttu-id="33fc4-231">В этом руководстве вы создана классы модели данных и создать базу данных из этих классов.</span><span class="sxs-lookup"><span data-stu-id="33fc4-231">In this tutorial, you created data model classes and generated a database from those classes.</span></span> <span data-ttu-id="33fc4-232">Заполнение таблиц базы данных тестовыми данными.</span><span class="sxs-lookup"><span data-stu-id="33fc4-232">You filled the database tables with test data.</span></span> <span data-ttu-id="33fc4-233">Используемые привязки модели для получения данных из базы данных и затем отображаются данные в элементе управления GridView.</span><span class="sxs-lookup"><span data-stu-id="33fc4-233">You used model binding to retrieve data from the database, and then displayed the data in a GridView.</span></span>

<span data-ttu-id="33fc4-234">В следующем [руководстве](updating-deleting-and-creating-data.md) в этой серии, вы включите обновление, удаление и создание данных.</span><span class="sxs-lookup"><span data-stu-id="33fc4-234">In the next [tutorial](updating-deleting-and-creating-data.md) in this series, you will enable updating, deleting, and creating data.</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="33fc4-235">Вперед</span><span class="sxs-lookup"><span data-stu-id="33fc4-235">Next</span></span>](updating-deleting-and-creating-data.md)
