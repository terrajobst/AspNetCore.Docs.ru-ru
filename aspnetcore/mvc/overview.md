---
title: "Общие сведения ASP.NET Core MVC"
author: ardalis
description: "Узнайте, как основной ASP.NET MVC является многофункциональную платформу для построения веб-приложений и шаблон разработки Model-View-Controller с помощью API-интерфейсов."
keywords: ASP.NET Core
ms.author: riande
manager: wpickett
ms.date: 01/08/2018
ms.topic: article
ms.assetid: 89af38d1-52e0-4db7-b791-dbce909b0714
ms.technology: aspnet
ms.prod: asp.net-core
uid: mvc/overview
ms.openlocfilehash: 33c293e15c0a7f18bbace9dc564fe11d93a7d509
ms.sourcegitcommit: df2157ae9aeea0075772719c29784425c783e82a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/10/2018
---
# <a name="overview-of-aspnet-core-mvc"></a>Общие сведения ASP.NET Core MVC

По [Стив Смит](https://ardalis.com/)

Основные компоненты ASP.NET MVC — многофункциональную платформу для построения веб-приложений и шаблон разработки Model-View-Controller с помощью API-интерфейсов.

## <a name="what-is-the-mvc-pattern"></a>Что такое шаблон MVC

Шаблон архитектуры Model-View-Controller (MVC) разделяет приложение на три группы компонентов: модели, представления и контроллеры. Этот шаблон позволяет достигнуть [Разделение областей ответственности](http://deviq.com/separation-of-concerns/). С помощью этого шаблона, запросы пользователей направляются контроллер, который отвечает за работу с моделью для выполнения действий пользователя и/или получить результаты запросов. Контроллер выбирает представления для отображения для пользователя и предоставляет ему все данные модели, которые требуются.

На следующей диаграмме показаны три основных компонента и какие из них ссылаются другие:

![Шаблон MVC](overview/_static/mvc.png)

Это разграничение обязанностей позволяет масштабировать приложения с точки зрения сложности, так как это упрощает код, отлаживать и тестировать нечто (модели, представления или контроллер) с одним заданием (и соответствует [персональной ответственности ](http://deviq.com/single-responsibility-principle/)). Более сложен для обновления, тестирования и отладки кода, имеющее зависимости, которые распределены между двумя или несколькими из этих трех областей. Например логики интерфейса пользователя, как правило, изменение чаще, чем бизнес-логики. Если код и бизнес-логики представления объединяются в один объект, необходимо изменить объект, содержащий бизнес-логику, каждый раз при изменении пользовательского интерфейса. Это может привести к ошибкам и требуется повторное все бизнес-логики, после изменения каждой минимальным пользовательским интерфейсом.

> [!NOTE]
> Представление и контроллер зависят от модели. Однако модели зависит от контроллера ни представления. Это является одним из ключевых преимуществ разделения. Это разделение позволяет выполнять построение и тестирование модели независимо от визуального представления.

### <a name="model-responsibilities"></a>Обязанности модели

Модели в MVC-приложении представляет состояние приложения и бизнес-логика или операций, которые должны выполняться в нем. Бизнес-логики должны инкапсулироваться в модели, вместе с любой реализации логики для сохранения состояния приложения. Строго типизированного представления обычно используют типы ViewModel, содержащие данные для отображения в этом представлении. Контроллер создает и заполняет эти экземпляры ViewModel из модели.

> [!NOTE]
> Существует множество способов для организации модели в приложение, использующее шаблон архитектуры MVC. Дополнительные сведения о некоторых [различные типы моделей](http://deviq.com/kinds-of-models/).

### <a name="view-responsibilities"></a>Просмотр ответственности

Представления отвечают за представления содержимого через пользовательский интерфейс. Они используют [представлений Razor](#razor-view-engine) для внедрения кода .NET в разметке HTML. Должно быть минимальным логики представления и логики в них должны быть связаны с представления содержимого. Если файлы необходимости выполнять большую часть логики в представлении для отображения данных из сложной модели, рассмотрите возможность использования [компонент представления](views/view-components.md), ViewModel, или Просмотр шаблона для упрощения просмотра.

### <a name="controller-responsibilities"></a>Обязанности контроллера

Контроллеры служат для управления взаимодействием с пользователем, работу с моделью и Выбор представления для отображения. В приложении MVC представления только отображают сведения; контроллер обрабатывает и реагирует на ввод данных пользователем и взаимодействия. В шаблоне MVC контроллер является начальной точкой и выбирается какая модель типы для работы с и представления для отображения (поэтому ее имя — он управляет, как приложение реагирует на конкретный запрос).

> [!NOTE]
> Контроллеры не следует слишком сложным по слишком много ответственности. Чтобы становились логику контроллера слишком сложным, используйте [персональной ответственности](http://deviq.com/single-responsibility-principle/) к бизнес-логике push из контроллера и в модели домена.

>[!TIP]
> Если обнаружится, что ваши действия контроллера часто выполнять те же самые виды действий, можно выполнить [не повторять самостоятельно принцип](http://deviq.com/don-t-repeat-yourself/) путем перемещения этих общих действий в [фильтры](#filters).

## <a name="what-is-aspnet-core-mvc"></a>Что такое основные ASP.NET MVC

Платформа ASP.NET Core MVC является упрощенных с открытым исходным легковесной платформой оптимизирован для использования с ASP.NET Core.

ASP.NET Core MVC предоставляет основанный на шаблонах способ создания динамических веб-сайтов, позволяющий четкого разделения проблем. Предоставляет полный контроль над разметки, согласованной с TDD разработкой поддерживает и использует новейшие веб-стандарты.

## <a name="features"></a>Функции

Основные ASP.NET MVC включает следующие параметры.

* [Маршрутизация](#routing)
* [Привязка модели](#model-binding)
* [Проверка модели](#model-validation)
* [Внедрение зависимостей](../fundamentals/dependency-injection.md)
* [Фильтры](#filters)
* [Области](#areas)
* [Веб-API](#web-apis)
* [Возможности тестирования](#testability)
* [Обработчик представлений Razor](#razor-view-engine)
* [Строго типизированные представления](#strongly-typed-views)
* [Вспомогательные функции тегов](#tag-helpers)
* [Просмотр компонентов](#view-components)

### <a name="routing"></a>Маршрутизация

ASP.NET Core MVC, построены на основе [маршрутизации ASP.NET Core](../fundamentals/routing.md), мощный компонент сопоставления URL-адресов, который позволяет создавать приложения, которые имеют понятными и для поиска URL-адреса. Это позволяет определить именования шаблонов URL-адрес приложения, которые хорошо для оптимизации для поисковых систем (SEO) и компоновки без учета организацию файлов на веб-сервере. Вы можете определить свои маршруты с помощью синтаксиса удобный маршрута шаблона, поддерживающего значение ограничения маршрута, значения по умолчанию и необязательных значений.

*Маршрутизация на основе соглашения о* принимает приложения позволяет определить URL-адрес глобально форматов, и каким образом каждый из этих форматов сопоставляется метод определенное действие на данный контроллер. При получении входящего запроса, механизм маршрутизации выполняет синтаксический анализ URL-адрес соответствует его к одному из определенных форматов URL-адрес и затем вызывает метод действия связанного контроллера.

```csharp
routes.MapRoute(name: "Default", template: "{controller=Home}/{action=Index}/{id?}");
```

*Атрибут маршрутизации* позволяет указать сведения о маршрутизации по контроллеров и действий с помощью атрибутов, которые определяют маршрутов для приложения. Это означает, определениях маршрута находятся рядом с контроллера и действия, с которым они связаны.

```csharp
[Route("api/[controller]")]
public class ProductsController : Controller
{
  [HttpGet("{id}")]
  public IActionResult GetProduct(int id)
  {
    ...
  }
}
```

### <a name="model-binding"></a>Привязка модели

ASP.NET Core MVC [привязки модели](models/model-binding.md) преобразует данные запроса клиента (значений формы, данные о маршруте, параметров строки запроса, заголовки HTTP) в объекты, которые могут справляться с контроллером. В результате логику контроллера не имеет для этого нужно определять данные поступившего запроса; он просто имеет данные в качестве параметров его методов действия.

```csharp
public async Task<IActionResult> Login(LoginViewModel model, string returnUrl = null) { ... }
   ```

### <a name="model-validation"></a>Проверка модели

Основные ASP.NET MVC поддерживает [проверки](models/validation.md) дополняя модель объекта с атрибуты проверки данных заметок. Атрибуты проверки проверяются на стороне клиента, прежде чем значения передаются на сервер, а также вызывается на сервере перед выполнением действия контроллера.

```csharp
using System.ComponentModel.DataAnnotations;
public class LoginViewModel
{
    [Required]
    [EmailAddress]
    public string Email { get; set; }

    [Required]
    [DataType(DataType.Password)]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }
}
```

Действие контроллера:

```csharp
public async Task<IActionResult> Login(LoginViewModel model, string returnUrl = null)
{
    if (ModelState.IsValid)
    {
      // work with the model
    }
    // At this point, something failed, redisplay form
    return View(model);
}
```

Платформа обрабатывает Проверка запроса данных на клиенте и на сервере. Логику проверки, указанные на типы модели добавляется в готовом для просмотра представления в виде ненавязчивой заметок и обеспечивается в браузере с [jQuery проверки](https://jqueryvalidation.org/).

### <a name="dependency-injection"></a>Внедрение зависимостей

ASP.NET Core имеет встроенную поддержку [внедрения зависимости (DI)](../fundamentals/dependency-injection.md). В ASP.NET MVC Core [контроллеров](controllers/dependency-injection.md) можно запроса необходимых служб через их конструкторы, позволяя выполните [явные зависимости принцип](http://deviq.com/explicit-dependencies-principle/).

Можно также использовать приложение [внедрение зависимостей в представлении файлы](views/dependency-injection.md), с использованием `@inject` директиву:

```cshtml
@inject SomeService ServiceName
<!DOCTYPE html>
<html lang="en">
<head>
    <title>@ServiceName.GetTitle</title>
</head>
<body>
    <h1>@ServiceName.GetTitle</h1>
</body>
</html>
```

### <a name="filters"></a>Фильтры

[Фильтры](controllers/filters.md) помочь разработчикам инкапсулировать проблемы с перекрестными, такие как обработка исключений или авторизации. Фильтры включить выполнение пользовательской логики до и после обработки методов действий и можно настроить для запуска в определенных точках при конвейерной обработки для данного запроса. Фильтры могут применяться к контроллерам или действия, как атрибуты (или может выполняться глобально). Несколько фильтров (например, `Authorize`) включаются в структуре.


```csharp
[Authorize]
   public class AccountController : Controller
   {
```

### <a name="areas"></a>Области

[Области](controllers/areas.md) предоставляют способ разделения большого ASP.NET Core MVC, веб-приложения на более мелкие функциональные группы. Область является структурой MVC, Расположенной внутри приложения. В проект MVC логические компоненты, например модели, контроллера и представления хранятся в разных папках и MVC использует соглашения об именовании, чтобы создать связь между этими компонентами. Для большого приложения может быть выгодно для разделения приложения на отдельные области высокий уровень функциональных возможностей. Например, для электронной коммерции приложение с несколько подразделений, таких как извлечение, выставлении счетов и поиска и т. д. Каждый из этих частей имеют свои собственные логический компонент представления, контроллеры и модели.

### <a name="web-apis"></a>Веб-API

Помимо прекрасно подходит для создания веб-сайтов, ASP.NET Core MVC имеет отличную поддержку для построения веб-API. Можно создавать службы, которые широкого диапазона клиентов, включая браузеры и мобильные устройства.

Платформа включает поддержку для согласования содержимого HTTP со встроенной поддержкой [форматирование данных](models/formatting.md) формате JSON или XML. Запись [пользовательские модули форматирования](advanced/custom-formatters.md) для добавления поддержки для собственных форматов.

Чтобы обеспечить поддержку гипермедиа используйте компоновки. Легко включить поддержку [ресурсов независимо от источника (CORS) для управления доступом](http://www.w3.org/TR/cors/) , чтобы ваш веб-API может совместно использоваться в нескольких веб-приложений.

### <a name="testability"></a>Возможности тестирования

Использование framework интерфейсы и внедрение зависимостей сделать хорошо подходит для модульного тестирования и платформа включает функции (например, TestHost и InMemory поставщика Entity Framework), которые обеспечивают [интеграционного тестирования](../testing/integration-testing.md) быстрого и легко также. Дополнительные сведения о [тестирование логики контроллера](controllers/testing.md).

### <a name="razor-view-engine"></a>Обработчик представлений Razor

[Представления ASP.NET Core MVC](views/overview.md) использовать [представлений Razor](views/razor.md) для визуализации представления. Razor — это язык разметки compact, выразительный и жидкости шаблон для определения представлений с помощью встроенного кода C#. Razor используется для динамического создания веб-содержимого на сервере. Серверный код полностью можно комбинировать с содержимым стороны клиента и код.

```text
<ul>
  @for (int i = 0; i < 5; i++) {
    <li>List item @i</li>
  }
</ul>
```

С помощью представлений Razor, можно определить [макеты](views/layout.md), [разделяемые представления](views/partial.md) и подставляемые разделов.

### <a name="strongly-typed-views"></a>Строго типизированные представления

Представлений Razor в MVC может быть строго типизированным в зависимости от модели. Контроллеры можно передать модель строго типизированные представления, включение представлений, чтобы иметь проверку типов и поддержку IntelliSense.

Например, следующее представление отображает модель типа `IEnumerable<Product>`:

```cshtml
@model IEnumerable<Product>
<ul>
    @foreach (Product p in Model)
    {
        <li>@p.Name</li>
    }
</ul>
```

### <a name="tag-helpers"></a>Вспомогательных функций тегов

[Вспомогательных функций тегов](views/tag-helpers/intro.md) код стороны сервер мог участвовать в создании и подготовке к просмотру элементов HTML в файлах Razor. Вспомогательных функций тегов можно использовать для определения настраиваемых тегов (например, `<environment>`) или для изменения поведения существующие теги (например, `<label>`). Вспомогательных функций тегов привязки к определенным элементам, на основе имени элемента и его атрибуты. Они предоставляют преимущества отрисовки на стороне сервера сохранением возможности редактирования HTML.

Существует множество встроенных вспомогательных функций тегов для общих задач — например для создания формы, ссылки, загрузки средств и пакетов дополнительные - и еще более доступные из открытых репозиториев GitHub и в качестве NuGet. Вспомогательных функций тегов разрабатываются в C#, и они предназначены для HTML-элементов на основе имени элемента, имя атрибута или родительского тега. Например, встроенная LinkTagHelper можно использовать, чтобы создать ссылку на `Login` действие `AccountsController`:

```cshtml
<p>
    Thank you for confirming your email.
    Please <a asp-controller="Account" asp-action="Login">Click here to Log in</a>.
</p>
```

`EnvironmentTagHelper` Может использоваться для включения различных наборов символов в зависимости от среды выполнения, например разработки, промежуточной или производственной представления (например, raw или уменьшенный):

```cshtml
<environment names="Development">
    <script src="~/lib/jquery/dist/jquery.js"></script>
</environment>
<environment names="Staging,Production">
    <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.1.4.min.js"
            asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
            asp-fallback-test="window.jQuery">
    </script>
</environment>
```

Вспомогательных функций тегов предоставить функции разработки понятного имени HTML и IntelliSense среду с широкими возможностями для создания разметки HTML и Razor. Большинство встроенных вспомогательных функций тегов целевой существующих элементов HTML и предоставить серверные атрибуты для элемента.

### <a name="view-components"></a>Просмотр компонентов

[Просмотр компонентов](views/view-components.md) позволяют упаковать логики отрисовки и использовать его в приложении. Они аналогичны [разделяемые представления](views/partial.md), но с логикой, связанные.
