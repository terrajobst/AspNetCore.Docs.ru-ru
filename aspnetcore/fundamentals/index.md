---
title: Основы ASP.NET Core
author: rick-anderson
description: Познакомьтесь с основными принципами создания приложений ASP.NET Core.
monikerRange: '>= aspnetcore-2.1'
ms.author: riande
ms.custom: mvc
ms.date: 03/30/2020
uid: fundamentals/index
ms.openlocfilehash: da2b42a7cf5d116a36d1dd9fa586d40ab31fc52d
ms.sourcegitcommit: 72792e349458190b4158fcbacb87caf3fc605268
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80417645"
---
# <a name="aspnet-core-fundamentals"></a>Основы ASP.NET Core

::: moniker range=">= aspnetcore-3.0"

В этой статье приведен обзор основных тем, связанных с разработкой приложений ASP.NET Core.

## <a name="the-startup-class"></a>Класс Startup

В классе `Startup` делается следующее.

* Настраиваются службы, необходимые приложению.
* Конвейер обработки запросов приложения определен как ряд компонентов ПО промежуточного слоя.

Пример класса `Startup`:

[!code-csharp[](index/samples_snapshot/3.x/Startup.cs?highlight=3,12)]

Для получения дополнительной информации см. <xref:fundamentals/startup>.

## <a name="dependency-injection-services"></a>Введение зависимостей (службы)

ASP.NET Core включает встроенную платформу внедрения зависимостей, позволяющую обращаться к настроенным службам в рамках приложения. Например, службой является компонент ведения журнала.

Код для настройки (или *регистрации*) служб добавляется в метод `Startup.ConfigureServices`. Пример:

[!code-csharp[](index/samples_snapshot/3.x/ConfigureServices.cs)]

Как правило, службы разрешаются из системы внедрения зависимостей с помощью внедрения конструктора. При внедрении конструктора класс объявляет параметр конструктора, который может быть требуемым типом или интерфейсом. Платформа внедрения зависимостей предоставляет экземпляр этой службы во время выполнения.

В следующем примере показано использование внедрения конструктора для разрешения `RazorPagesMovieContext` из системы внедрения зависимостей.

[!code-csharp[](index/samples_snapshot/3.x/Index.cshtml.cs?highlight=5)]

Если встроенный контейнер с инверсией управления (IoC) не удовлетворяет всем потребностям приложения, вместо него можно использовать сторонний контейнер IoC.

Для получения дополнительной информации см. <xref:fundamentals/dependency-injection>.

## <a name="middleware"></a>ПО промежуточного слоя

Конвейер обработки запросов состоит из ряда компонентов ПО промежуточного слоя. Каждый компонент выполняет операции в `HttpContext`, а затем либо вызывает следующий компонент в конвейере, либо завершает запрос.

По принятому соглашению компонент ПО промежуточного слоя добавляется в конвейер вызовом метода расширения `Use...` в методе `Startup.Configure`. Например, чтобы включить отрисовку статических файлов, вызовите `UseStaticFiles`.

В следующем примере показана настройка конвейера обработки запросов.

[!code-csharp[](index/samples_snapshot/3.x/Configure.cs)]

ASP.NET Core содержит большой набор встроенного ПО промежуточного слоя. Кроме того, можно создать пользовательские компоненты ПО промежуточного слоя.

Для получения дополнительной информации см. <xref:fundamentals/middleware/index>.

## <a name="host"></a>Узел

При запуске приложение ASP.NET Core создает *узел*. Узел инкапсулирует все ресурсы приложения:

* Реализация HTTP-сервера
* Компоненты ПО промежуточного слоя
* Ведение журнала
* Службы внедрения зависимостей
* Параметр Configuration

Существует два различных узла: 

* Универсальный узел .NET
* Веб-узел ASP.NET Core

Рекомендуется использовать универсальный узел .NET. Веб-узел ASP.NET Core доступен только для обеспечения обратной совместимости.

В следующем примере показано создание универсального узла .NET.

[!code-csharp[](index/samples_snapshot/3.x/Program.cs)]

Методы `CreateDefaultBuilder` и `ConfigureWebHostDefaults` применяются для настройки узла с набором параметров по умолчанию, например:

* Использование [Kestrel](#servers) в качестве веб-сервера и поддержка интеграции с IIS.
* Загрузка конфигурации из файлов *appsettings.json* и *appsettings.{имя среды}.json*, переменных среды, аргументов командной строки и других источников.
* Отправка выходных данных журнала в поставщики служб консоли и отладки.

Для получения дополнительной информации см. <xref:fundamentals/host/generic-host>.

### <a name="non-web-scenarios"></a>Сценарии, не связанные с Интернетом

Универсальный узел позволяет приложениям других типов использовать перекрестные расширения платформ, такие как средства ведения журналов, внедрения зависимостей, настройки и управления жизненным циклом. Дополнительные сведения см. в разделах <xref:fundamentals/host/generic-host> и <xref:fundamentals/host/hosted-services>.

## <a name="servers"></a>Серверы

Приложение ASP.NET Core использует реализацию HTTP-сервера для приема HTTP-запросов. Сервер отправляет приложению запросы в виде набора [функций запросов](xref:fundamentals/request-features), объединенных в `HttpContext`.

# <a name="windows"></a>[Windows](#tab/windows)

ASP.NET Core предоставляет следующие реализации серверов:

* *Kestrel* — это кроссплатформенный веб-сервер. Он часто запускается в реконфигурации прокси-сервера с помощью [IIS](https://www.iis.net/). В ASP.NET Core 2.0 и более поздних версиях можно использовать Kestrel в роли общедоступного пограничного сервера с прямым доступом через Интернет.
* *HTTP-сервер IIS* — это сервер для Windows, который использует службы IIS. Он позволяет запускать приложение ASP.NET Core и службы IIS в одном процессе.
* *HTTP.sys* — это сервер для Windows, который не используется со службами IIS.

# <a name="macos"></a>[macOS](#tab/macos)

ASP.NET Core предоставляет реализацию кроссплатформенного сервера *Kestrel*. В ASP.NET Core 2.0 и более поздних версиях можно использовать Kestrel в роли общедоступного пограничного сервера с прямым доступом через Интернет. Он часто запускается в реконфигурации прокси-сервера с помощью [Nginx](https://nginx.org) или [Apache](https://httpd.apache.org/).

# <a name="linux"></a>[Linux](#tab/linux)

ASP.NET Core предоставляет реализацию кроссплатформенного сервера *Kestrel*. В ASP.NET Core 2.0 и более поздних версиях можно использовать Kestrel в роли общедоступного пограничного сервера с прямым доступом через Интернет. Он часто запускается в реконфигурации прокси-сервера с помощью [Nginx](https://nginx.org) или [Apache](https://httpd.apache.org/).

---

Для получения дополнительной информации см. <xref:fundamentals/servers/index>.

## <a name="configuration"></a>Параметр Configuration

ASP.NET Core предоставляет платформу конфигурации, которая получает параметры в виде пар "имя-значение" от упорядоченного набора поставщиков конфигурации. Доступны встроенные поставщики конфигурации для различных источников, таких как файлы *JSON*, *XML*, переменные среды и аргументы командной строки. Для поддержки других источников можно создать настраиваемые поставщики конфигурации.

[По умолчанию](xref:fundamentals/configuration/index#default) приложения ASP.NET Core настроены для чтения из файла *appsettings.json*, переменных среды, командной строки и т. д. При загрузке конфигурации приложения значения из переменных среды переопределяют значения из файла *appsettings.json*.

Предпочтительный способ чтения связанных значений конфигурации — использование [шаблона параметров](xref:fundamentals/configuration/options). Дополнительные сведения см. в статье [Привязка иерархических данных конфигурации с помощью шаблона параметров](xref:fundamentals/configuration/index#optpat).

Для управления конфиденциальными данными конфигурации, например паролями, ASP.NET Core предоставляет [Менеджер секретов](xref:security/app-secrets#secret-manager). Для секретов в рабочей среде рекомендуется использовать [Azure Key Vault](xref:security/key-vault-configuration).

Для получения дополнительной информации см. <xref:fundamentals/configuration/index>.

## <a name="environments"></a>Среды

Среды выполнения, такие как `Development`, `Staging` и `Production`, являются ключевыми компонентами ASP.NET Core. Указать среду, в которой запускается приложение, можно с помощью переменной среды `ASPNETCORE_ENVIRONMENT`. ASP.NET Core считывает переменную среды при запуске приложения и сохраняет ее значение в реализации `IWebHostEnvironment`. Эта реализация доступна в любом месте приложения посредством внедрения зависимостей.

В следующем примере показана настройка приложения для предоставления подробных сведений об ошибке при выполнении в среде `Development`.

[!code-csharp[](index/samples_snapshot/3.x/StartupConfigure.cs?highlight=3-6)]

Для получения дополнительной информации см. <xref:fundamentals/environments>.

## <a name="logging"></a>Ведение журнала

ASP.NET Core поддерживает API ведения журналов, который работает с разными встроенными и сторонними поставщиками. Доступные следующие поставщики:

* Консоль
* Отладка
* Трассировка событий Windows
* Журнал событий Windows
* TraceSource
* Служба приложений Azure
* Azure Application Insights

Для создания журналов необходимо разрешить службу <xref:Microsoft.Extensions.Logging.ILogger%601> из системы внедрения зависимостей (DI) и вызвать методы ведения журналов, такие как <xref:Microsoft.Extensions.Logging.LoggerExtensions.LogInformation*>. Пример:

[!code-csharp[](index/samples_snapshot/3.x/TodoController.cs?highlight=5,13,19)]

Методы ведения журналов, такие как `LogInformation`, поддерживают любое количество полей. Как правило, эти поля используются для создания сообщения `string`, но некоторые поставщики ведения журналов отправляют их в хранилище данных в виде отдельных полей. Благодаря этому поставщики могут реализовывать [семантическое (структурированное) ведение журналов](https://softwareengineering.stackexchange.com/questions/312197/benefits-of-structured-logging-vs-basic-logging).

Для получения дополнительной информации см. <xref:fundamentals/logging/index>.

## <a name="routing"></a>Маршрутизация

*Маршрут* — это шаблон URL-адреса, сопоставляемый с обработчиком. Обычно обработчик представляет собой страницу Razor, метод действия в контроллере MVC или ПО промежуточного слоя. Маршрутизация ASP.NET Core позволяет контролировать URL-адреса, используемые приложением.

Для получения дополнительной информации см. <xref:fundamentals/routing>.

## <a name="error-handling"></a>Обработка ошибок

ASP.NET Core содержит встроенные функции обработки ошибок, такие как:

* Страница исключений для разработчика
* Настраиваемые страницы ошибок
* Статические страницы с кодами состояния
* Обработка исключений при запуске

Для получения дополнительной информации см. <xref:fundamentals/error-handling>.

## <a name="make-http-requests"></a>Создание HTTP-запросов

ASP.NET Core включает реализацию интерфейса `IHttpClientFactory` для создания экземпляров `HttpClient`. Фабрика:

* Центральное расположение для именования и настройки логических экземпляров `HttpClient`. Например, можно зарегистрировать и использовать клиент *github* для доступа к сайту GitHub. Можно зарегистрировать и настроить клиент по умолчанию для других целей.
* Поддержка регистрации и связывания в цепочки множества делегирующих обработчиков для создания конвейера ПО промежуточного слоя под исходящие запросы. Этот шаблон похож на входящий конвейер ПО промежуточного слоя для ASP.NET Core. Шаблон предоставляет механизм управления сквозной функциональностью HTTP-запросов, включая кэширование, обработку ошибок, сериализацию и ведение журнала.
* Интеграция с *Polly* — популярной сторонней библиотекой для обработки временных сбоев.
* Управление созданием пулов и временем существования базовых экземпляров `HttpClientHandler` с целью избежать обычных проблем с DNS, которые возникают при управлении временем существования `HttpClient` вручную.
* Настройка параметров ведения журнала (через <xref:Microsoft.Extensions.Logging.ILogger>) для всех запросов, отправленных через клиентов, созданных фабрикой.

Для получения дополнительной информации см. <xref:fundamentals/http-requests>.

## <a name="content-root"></a>Корневой каталог содержимого

Корневой каталог содержимого — это базовый путь к следующим элементам:

* Исполняемый файл, в котором размещено приложение (*EXE*).
* Скомпилированные сборки, составляющие приложение (*DLL*).
* Файлы содержимого, используемые приложением, например:
  * Файлы Razor (*CSHTML*, *RAZOR*).
  * Файлы конфигурации (*JSON*, *XML*).
  * Файлы данных (*DB*).
* [Корневой веб-каталог](#web-root), обычно это папка *wwwroot*.

Во время развертывания корень содержимого по умолчанию сбрасывается до корневого каталога проекта. Этот каталог является базовым путем к файлам содержимого приложения и [корневому веб-каталогу](#web-root). Альтернативный корневой путь к содержимому может быть указан при [создании узла](#host). Дополнительные сведения: [Корень содержимого](xref:fundamentals/host/generic-host#contentrootpath-1).

## <a name="web-root"></a>Корневой веб-узел

Корневой веб-каталог — это базовый путь к общедоступным файлам статических ресурсов, например:

* Таблицы стилей (*CSS*).
* JavaScript (*JS*).
* Изображения (*PNG*, *JPG*).

По умолчанию статические файлы обслуживаются только в корневом веб-каталоге и его подкаталогах. По умолчанию используется путь *{корневой каталог содержимого}/wwwroot*. Альтернативное расположение корневого веб-каталога можно указать при [создании узла](#host). Дополнительные сведения см. в разделе [Корневой веб-каталог](xref:fundamentals/host/generic-host#webroot-1).

Запретите публикацию файлов в *wwwroot* с помощью [\<элемента проекта Content>](/visualstudio/msbuild/common-msbuild-project-items#content) в файле проекта. В следующем примере запрещается публикация содержимого в каталоге *wwwroot/local* и его подкаталогах:

```xml
<ItemGroup>
  <Content Update="wwwroot\local\**\*.*" CopyToPublishDirectory="Never" />
</ItemGroup>
```

Для указания на корневой каталог файлов Razor (*CSHTML*) используется символ тильды и косой черты (`~/`). Путь, начинающийся с `~/`, называется *виртуальным путем*.

Для получения дополнительной информации см. <xref:fundamentals/static-files>.

::: moniker-end

::: moniker range="< aspnetcore-3.0"

В этой статье приведен обзор основных тем, связанных с разработкой приложений ASP.NET Core.

## <a name="the-startup-class"></a>Класс Startup

В классе `Startup` делается следующее.

* Настраиваются службы, необходимые приложению.
* Определяется конвейер обработки запросов.

*Службы* — это компоненты, которые используются в приложении. Например, службой является компонент ведения журнала. Код для настройки (или *регистрации*) служб добавляется в метод `Startup.ConfigureServices`.

Конвейер обработки запросов состоит из ряда компонентов *ПО промежуточного* слоя. Например, это ПО может обрабатывать запросы для статических файлов или перенаправлять HTTP-запросы в HTTPS. Каждый компонент ПО промежуточного слоя выполняет асинхронные операции в `HttpContext`, а затем либо вызывает следующий компонент в конвейере, либо завершает запрос. Код для настройки конвейера обработки запросов добавляется в метод `Startup.Configure`.

Пример класса `Startup`:

[!code-csharp[](index/samples_snapshot/2.x/Startup.cs?highlight=3,12)]

Для получения дополнительной информации см. <xref:fundamentals/startup>.

## <a name="dependency-injection-services"></a>Введение зависимостей (службы)

ASP.NET Core включает встроенную платформу внедрения зависимостей, позволяющую классам приложения обращаться к настроенным службам. Одним из вариантов получения экземпляра службы в классе является создание конструктора с параметром требуемого типа. Параметр может быть типом службы или интерфейсом. Система внедрения зависимостей предоставляет службу во время выполнения.

Ниже показан класс, который использует внедрение зависимостей для получения объекта контекста Entity Framework Core. Выделенная строка является примером внедрения через конструктор.

[!code-csharp[](index/samples_snapshot/2.x/Index.cshtml.cs?highlight=5)]

Несмотря на то, что система внедрения зависимостей является встроенной, она позволяет вам при желании подключать сторонний контейнер с инверсией управления (IoC).

Для получения дополнительной информации см. <xref:fundamentals/dependency-injection>.

## <a name="middleware"></a>ПО промежуточного слоя

Конвейер обработки запросов состоит из ряда компонентов ПО промежуточного слоя. Каждый компонент выполняет асинхронные операции в `HttpContext`, а затем либо вызывает следующий компонент в конвейере, либо завершает запрос.

По принятому соглашению компонент ПО промежуточного слоя добавляется в конвейер вызовом метода расширения `Use...` в методе `Startup.Configure`. Например, чтобы включить отрисовку статических файлов, вызовите `UseStaticFiles`.

Код настройки конвейера обработки запросов выделен в следующем примере:

[!code-csharp[](index/samples_snapshot/2.x/Startup.cs?highlight=14-16)]

ASP.NET Core включает обширный набор встроенного ПО промежуточного слоя и позволяет вам писать свое собственное.

Для получения дополнительной информации см. <xref:fundamentals/middleware/index>.

## <a name="host"></a>Узел

Приложение ASP.NET Core создает *узел* при запуске. Узел — это объект, который инкапсулирует все ресурсы приложения.

* Реализация HTTP-сервера
* Компоненты ПО промежуточного слоя
* Ведение журнала
* Внедрение зависимостей
* Параметр Configuration

Основной причиной включения всех взаимозависимых ресурсов приложения в один объект является управление жизненным циклом: контроль запуска и корректного завершения работы приложения.

Доступны два узла: веб-узел и универсальный узел. В ASP.NET Core 2.x универсальный узел используется в сценариях, не связанных с Интернетом.

Код для создания узла находится в `Program.Main`:

[!code-csharp[](index/samples_snapshot/2.x/Program.cs)]

Метод `CreateDefaultBuilder` применяется для настройки узла с часто используемыми параметрами, например:

* Использование [Kestrel](#servers) в качестве веб-сервера и поддержка интеграции с IIS.
* Загрузка конфигурации из файлов *appsettings.json* и *appsettings.{имя среды}.json*, переменных среды, аргументов командной строки и других источников.
* Отправка выходных данных журнала в поставщики служб консоли и отладки.

Для получения дополнительной информации см. <xref:fundamentals/host/web-host>.

### <a name="non-web-scenarios"></a>Сценарии, не связанные с Интернетом

Универсальный узел позволяет приложениям других типов использовать перекрестные расширения платформ, такие как средства ведения журналов, внедрения зависимостей, настройки и управления жизненным циклом. Дополнительные сведения см. в разделах <xref:fundamentals/host/generic-host> и <xref:fundamentals/host/hosted-services>.

## <a name="servers"></a>Серверы

Приложение ASP.NET Core использует реализацию HTTP-сервера для приема HTTP-запросов. Сервер отправляет приложению запросы в виде набора [функций запросов](xref:fundamentals/request-features), объединенных в `HttpContext`.

::: moniker-end

::: moniker range="= aspnetcore-2.2"

# <a name="windows"></a>[Windows](#tab/windows)

ASP.NET Core предоставляет следующие реализации серверов:

* *Kestrel* — это кроссплатформенный веб-сервер. Он часто запускается в реконфигурации прокси-сервера с помощью [IIS](https://www.iis.net/). Kestrel можно использовать в роли общедоступного пограничного сервера с прямым доступом из Интернета.
* *HTTP-сервер IIS* — это сервер для Windows, который использует службы IIS. Он позволяет запускать приложение ASP.NET Core и службы IIS в одном процессе.
* *HTTP.sys* — это сервер для Windows, который не используется со службами IIS.

# <a name="macos"></a>[macOS](#tab/macos)

ASP.NET Core предоставляет реализацию кроссплатформенного сервера *Kestrel*. Kestrel можно использовать в роли общедоступного пограничного сервера с прямым доступом из Интернета. Он часто запускается в реконфигурации прокси-сервера с помощью [Nginx](https://nginx.org) или [Apache](https://httpd.apache.org/).

# <a name="linux"></a>[Linux](#tab/linux)

ASP.NET Core предоставляет реализацию кроссплатформенного сервера *Kestrel*. Kestrel можно использовать в роли общедоступного пограничного сервера с прямым доступом из Интернета. Он часто запускается в реконфигурации прокси-сервера с помощью [Nginx](https://nginx.org) или [Apache](https://httpd.apache.org/).

---

::: moniker-end

::: moniker range="< aspnetcore-2.2"

# <a name="windows"></a>[Windows](#tab/windows)

ASP.NET Core предоставляет следующие реализации серверов:

* *Kestrel* — это кроссплатформенный веб-сервер. Он часто запускается в реконфигурации прокси-сервера с помощью [IIS](https://www.iis.net/). Kestrel можно использовать в роли общедоступного пограничного сервера с прямым доступом из Интернета.
* *HTTP.sys* — это сервер для Windows, который не используется со службами IIS.

# <a name="macos"></a>[macOS](#tab/macos)

ASP.NET Core предоставляет реализацию кроссплатформенного сервера *Kestrel*. Kestrel можно использовать в роли общедоступного пограничного сервера с прямым доступом из Интернета. Он часто запускается в реконфигурации прокси-сервера с помощью [Nginx](https://nginx.org) или [Apache](https://httpd.apache.org/).

# <a name="linux"></a>[Linux](#tab/linux)

ASP.NET Core предоставляет реализацию кроссплатформенного сервера *Kestrel*. Kestrel можно использовать в роли общедоступного пограничного сервера с прямым доступом из Интернета. Он часто запускается в реконфигурации прокси-сервера с помощью [Nginx](https://nginx.org) или [Apache](https://httpd.apache.org/).

---

::: moniker-end

::: moniker range="< aspnetcore-3.0"

Для получения дополнительной информации см. <xref:fundamentals/servers/index>.

## <a name="configuration"></a>Параметр Configuration

ASP.NET Core предоставляет платформу конфигурации, которая получает параметры в виде пар "имя-значение" от упорядоченного набора поставщиков конфигурации. Доступны встроенные поставщики конфигурации для различных источников, таких как файлы *JSON*, *XML*, переменные среды и аргументы командной строки. Кроме того, вы можете писать поставщики конфигурации сами.

Например, можно указать, что источником конфигурации являются файл *appsettings.json* и переменные среды. В этом случае при запросе значения *ConnectionString* платформа сначала выполнит поиск в файле *appsettings.json*. Если значение будет найдено не только в нем, но и в переменной среды, приоритет получит значение из переменной среды.

Для управления конфиденциальными данными конфигурации, например паролями, ASP.NET Core предоставляет специальный инструмент [Менеджер секретов](xref:security/app-secrets). Для секретов в рабочей среде рекомендуется использовать [Azure Key Vault](xref:security/key-vault-configuration).

Для получения дополнительной информации см. <xref:fundamentals/configuration/index>.

## <a name="options"></a>Параметры

Когда это возможно, ASP.NET Core следует *шаблону параметров* для хранения и получения значений конфигурации. Шаблон параметров использует классы для представления групп связанных настроек.

Например, следующий код задает параметры WebSockets:

[!code-csharp[](index/samples_snapshot/2.x/UseWebSockets.cs)]

Для получения дополнительной информации см. <xref:fundamentals/configuration/options>.

## <a name="environments"></a>Среды

Среды выполнения, включая среду *разработки*, *промежуточную* и *рабочую* среды, являются ключевыми компонентами ASP.NET Core. Указать среду, в которой запускается приложение, можно с помощью переменной среды `ASPNETCORE_ENVIRONMENT`. ASP.NET Core считывает переменную среды при запуске приложения и сохраняет ее значение в реализации `IHostingEnvironment`. Объект среды можно получить в любом месте приложения при помощи внедрения зависимостей.

В следующем примере кода из класса `Startup` показана настройка приложения для вывода подробных сведений об ошибках исключительно при запуске в среде разработки:

[!code-csharp[](index/samples_snapshot/2.x/StartupConfigure.cs?highlight=3-6)]

Для получения дополнительной информации см. <xref:fundamentals/environments>.

## <a name="logging"></a>Ведение журнала

ASP.NET Core поддерживает API ведения журналов, который работает с разными встроенными и сторонними поставщиками. Доступны следующие поставщики:

* Консоль
* Отладка
* Трассировка событий Windows
* Журнал событий Windows
* TraceSource
* Служба приложений Azure
* Azure Application Insights

Записи в журналы можно вносить в любом месте кода приложения. Для этого нужно получить объект `ILogger` из внедрения зависимостей и вызвать методы ведения журналов.

Ниже приведен пример кода, где используется объект `ILogger`. В коде выделены строки внедрения конструктора и вызова методов ведения журналов.

[!code-csharp[](index/samples_snapshot/2.x/TodoController.cs?highlight=5,13,17)]

Интерфейс `ILogger` позволяет передавать в поставщик ведения журналов любое количество полей. Как правило, поля используются для создания строки сообщения, но поставщик также может отправлять их в хранилище данных в виде отдельных полей. Благодаря этому поставщики могут реализовывать [семантическое (структурированное) ведение журналов](https://softwareengineering.stackexchange.com/questions/312197/benefits-of-structured-logging-vs-basic-logging).

Для получения дополнительной информации см. <xref:fundamentals/logging/index>.

## <a name="routing"></a>Маршрутизация

*Маршрут* — это шаблон URL-адреса, сопоставляемый с обработчиком. Обычно обработчик представляет собой страницу Razor, метод действия в контроллере MVC или ПО промежуточного слоя. Маршрутизация ASP.NET Core позволяет контролировать URL-адреса, используемые приложением.

Для получения дополнительной информации см. <xref:fundamentals/routing>.

## <a name="error-handling"></a>Обработка ошибок

ASP.NET Core содержит встроенные функции обработки ошибок, такие как:

* Страница исключений для разработчика
* Настраиваемые страницы ошибок
* Статические страницы с кодами состояния
* Обработка исключений при запуске

Для получения дополнительной информации см. <xref:fundamentals/error-handling>.

## <a name="make-http-requests"></a>Создание HTTP-запросов

ASP.NET Core включает реализацию интерфейса `IHttpClientFactory` для создания экземпляров `HttpClient`. Фабрика:

* Центральное расположение для именования и настройки логических экземпляров `HttpClient`. Например, можно зарегистрировать и использовать клиент *github* для доступа к GitHub. Можно зарегистрировать клиент по умолчанию для других целей.
* Поддержка регистрации и связывания в цепочки множества делегирующих обработчиков для создания конвейера ПО промежуточного слоя под исходящие запросы. Этот шаблон похож на входящий конвейер ПО промежуточного слоя в ASP.NET Core. Шаблон предоставляет механизм управления сквозной функциональностью HTTP-запросов, включая кэширование, обработку ошибок, сериализацию и ведение журнала.
* Интеграция с *Polly* — популярной сторонней библиотекой для обработки временных сбоев.
* Управление созданием пулов и временем существования базовых экземпляров `HttpClientHandler` с целью избежать обычных проблем с DNS, которые возникают при управлении временем существования `HttpClient` вручную.
* Настройка параметров ведения журнала (через `ILogger`) для всех запросов, отправленных через клиентов, созданных фабрикой.

Для получения дополнительной информации см. <xref:fundamentals/http-requests>.

## <a name="content-root"></a>Корневой каталог содержимого

Корневой каталог содержимого — это базовый путь к таким элементам:

* Исполняемый файл, в котором размещено приложение (*EXE*).
* Скомпилированные сборки, составляющие приложение (*DLL*).
* Файлы содержимого, не относящиеся к коду, используемые приложением, например:
  * Файлы Razor (*CSHTML*, *RAZOR*).
  * Файлы конфигурации (*JSON*, *XML*).
  * Файлы данных (*DB*).
* [Корневой веб-каталог](#web-root), обычно опубликованная папка *wwwroot*.

Во время разработки:

* Корень содержимого по умолчанию сбрасывается до корневого каталога проекта.
* Корневой каталог проекта используется для создания:
  * пути к файлам содержимого, не являющихся кодом приложения, в корневом каталоге проекта;
  * [корневого веб-каталога](#web-root), обычно папка *wwwroot* в корневом каталоге проекта.

Альтернативный корневой путь к содержимому может быть указан при [создании узла](#host). Для получения дополнительной информации см. <xref:fundamentals/host/web-host#content-root>.

## <a name="web-root"></a>Корневой веб-узел

Корневой веб-каталог — это базовый путь к общедоступным, не кодовым файлам статических ресурсов, например:

* Таблицы стилей (*CSS*).
* JavaScript (*JS*).
* Изображения (*PNG*, *JPG*).

Статические файлы обслуживаются по умолчанию только в корневом веб-каталоге (и подкаталогах).

По умолчанию используется путь *{корневой каталог содержимого}/wwwroot*. Альтернативное расположение можно задать при [создании узла](#host). Дополнительные сведения см. в разделе [Корневой веб-каталог](xref:fundamentals/host/web-host#web-root).

Запретите публикацию файлов в *wwwroot* с помощью [\<элемента проекта Content>](/visualstudio/msbuild/common-msbuild-project-items#content) в файле проекта. В следующем примере запрещается публикация содержимого в каталоге *wwwroot/local* и подкаталогах:

```xml
<ItemGroup>
  <Content Update="wwwroot\local\**\*.*" CopyToPublishDirectory="Never" />
</ItemGroup>
```

Для указания на корневой каталог файлов Razor (*CSHTML*) используется символ тильды и косой черты `~/`. Путь, начинающийся с `~/`, называется *виртуальным путем*.

Для получения дополнительной информации см. <xref:fundamentals/static-files>.

::: moniker-end
