---
title: Размещение и развертывание ASP.NET Core Blazor
author: guardrex
description: Узнайте, как размещать и развертывать приложения Blazor.
monikerRange: '>= aspnetcore-3.1'
ms.author: riande
ms.custom: mvc
ms.date: 03/11/2020
no-loc:
- Blazor
- SignalR
uid: host-and-deploy/blazor/index
ms.openlocfilehash: ddf70da29a82d462422c1bdf74ff45b92bb10b56
ms.sourcegitcommit: 5bdc54162d7dea8d9fa54ac3055678db23586af1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/17/2020
ms.locfileid: "79434269"
---
# <a name="host-and-deploy-aspnet-core-blazor"></a>Размещение и развертывание ASP.NET Core Blazor

Авторы: [Люк Лэтем](https://github.com/guardrex), [Рэйнер Стропек](https://www.timecockpit.com) и [Дэниэл Рот](https://github.com/danroth27)

[!INCLUDE[](~/includes/blazorwasm-preview-notice.md)]

## <a name="publish-the-app"></a>Публикация приложения

Приложения публикуются для развертывания в конфигурации выпуска.

# <a name="visual-studio"></a>[Visual Studio](#tab/visual-studio)

1. На панели навигации выберите **Сборка** > **Опубликовать {приложение}** .
1. Выберите *целевой объект публикации*. Чтобы опубликовать объект в локальной среде, выберите **папку**.
1. Оставьте расположение по умолчанию в поле **выбора папки** или укажите другое расположение. Нажмите кнопку **Опубликовать**.

# <a name="net-core-cli"></a>[Интерфейс командной строки .NET Core](#tab/netcore-cli)

Используйте команду [dotnet publish](/dotnet/core/tools/dotnet-publish), чтобы опубликовать приложение с конфигурацией выпуска:

```dotnetcli
dotnet publish -c Release
```

---

Публикация приложения активирует [восстановление](/dotnet/core/tools/dotnet-restore) зависимостей проекта и выполняет [сборку](/dotnet/core/tools/dotnet-build) проекта, прежде чем создавать ресурсы для развертывания. В ходе процесса построения удаляются неиспользуемые методы и сборки, чтобы уменьшить размер скачиваемого приложения и время загрузки.

Расположения публикации.

* Blazor WebAssembly
  * Изолированное. Приложение публикуется в папке */bin/Release/{целевая_платформа}/publish/wwwroot*. Чтобы развернуть приложение как статический сайт, скопируйте содержимое папки *wwwroot* на узел статического сайта.
  * Размещенное. Приложение клиента Blazor WebAssembly публикуется в папке */bin/Release/{целевая_платформа}/publish/wwwroot* для серверного приложения вместе с другими статическими веб-ресурсами серверного приложения. Разверните содержимое папки *publish* на узле.
* Сервер Blazor. Приложение публикуется в папке */bin/Release/{целевая_платформа}/publish*. Разверните содержимое папки *publish* на узле.

Ресурсы из папки развертываются на веб-сервере. Развертывание может проводиться вручную или автоматизированно в зависимости от используемых средств разработки.

## <a name="app-base-path"></a>Базовый путь приложения

*Базовый путь приложения*  — это корневой URL-путь приложения. Рассмотрим следующее приложение ASP.NET Core и подприложение Blazor:

* Приложение ASP.NET Core называется `MyApp`:
  * Физическое расположение приложения: *d:/MyApp*.
  * запросы принимаются по адресу: `https://www.contoso.com/{MYAPP RESOURCE}`.
* Приложение Blazor с именем `CoolApp` является подприложением `MyApp`:
  * Физическое расположение подприложения — *d:/MyApp/CoolApp*.
  * запросы принимаются по адресу: `https://www.contoso.com/CoolApp/{COOLAPP RESOURCE}`.

Если для `CoolApp` не указана дополнительная конфигурация, дочернее приложение в этом сценарии не имеет сведений о своем местоположении на сервере. Например, приложение не может создавать правильные относительные URL-адреса к своим ресурсам, если ему неизвестно, что оно находится по относительному пути URL `/CoolApp/`.

Чтобы указать конфигурацию для базового пути к приложению Blazor`https://www.contoso.com/CoolApp/`, в качестве значения атрибута `href` тега `<base>` задается относительный корневой путь в файле *Pages/_Host.cshtml* (сервер Blazor) или в файле *wwwroot/index.html* (Blazor WebAssembly):

```html
<base href="/CoolApp/">
```

Серверные приложения Blazor дополнительно устанавливают базовый путь на стороне сервера путем вызова <xref:Microsoft.AspNetCore.Builder.UsePathBaseExtensions.UsePathBase*> в конвейере запросов приложения `Startup.Configure`:

```csharp
app.UsePathBase("/CoolApp");
```

При указании относительного пути URL компонент, который не находится в корневом каталоге, может создавать URL-адреса относительно корневого пути приложения. Компоненты, которые существуют на разных уровнях структуры каталогов, могут создавать ссылки на другие ресурсы во всех местах приложения. Базовый путь к приложению также используется для перехвата выбранных гиперссылок, когда целевой объект ссылки `href` находится в пределах URI-пространства базового пути к приложению. Маршрутизатор Blazor обрабатывает внутреннюю навигацию.

Во многих сценариях размещения относительный путь URL к приложению является корнем приложения. В таких случаях относительный базовый путь URL к приложению представляет собой косую черту (`<base href="/" />`), что является конфигурацией по умолчанию для приложения Blazor. В других сценариях размещения, таких как страницы GitHub и подприложения IIS, базовому пути приложения должно быть присвоено значение относительного пути URL к серверу для приложения.

Чтобы задать базовый путь к приложению, измените тег `<base>` в элементах `<head>` тега файла *Pages/_Host.cshtml* (сервер Blazor) или файла *wwwroot/index.html* (Blazor WebAssembly). Задайте значение атрибута `href` как `/{RELATIVE URL PATH}/` (косая черта в конце обязательна), где `{RELATIVE URL PATH}` — полный относительный путь URL приложения.

Приложение Blazor WebAssembly с некорневым относительным путем URL (например, `<base href="/CoolApp/">`) не сможет найти свои ресурсы *при локальном запуске*. Для решения этой проблемы во время локальной разработки и тестирования можно предоставить аргумент *базового пути*, который соответствует значению `href` тега `<base>` во время выполнения. Не добавляйте в конце косую черту. Для передачи аргумента базового пути при локальном запуске приложения выполните из каталога приложения команду `dotnet run` с параметром `--pathbase`:

```dotnetcli
dotnet run --pathbase=/{RELATIVE URL PATH (no trailing slash)}
```

Для приложения Blazor WebAssembly с относительным путем URL `/CoolApp/` (`<base href="/CoolApp/">`) команда имеет следующий вид:

```dotnetcli
dotnet run --pathbase=/CoolApp
```

Приложение Blazor WebAssembly отвечает локально по адресу `http://localhost:port/CoolApp`.

## <a name="deployment"></a>Развертывание

Инструкции по развертыванию см. в следующих разделах:

* <xref:host-and-deploy/blazor/webassembly>
* <xref:host-and-deploy/blazor/server>
